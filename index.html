<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="App Sinh Prompt GiÃ¡o Dá»¥c: táº¡o nhanh prompt cho 7 tÃ¬nh huá»‘ng giáº£ng dáº¡y phá»• biáº¿n." />
  <meta name="theme-color" content="#667eea" />
  <title>App Sinh Prompt GiÃ¡o Dá»¥c</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .card-shadow { box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    .prompt-output { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <noscript>
    <div class="bg-yellow-100 text-yellow-900 p-3 text-center">
      á»¨ng dá»¥ng cáº§n báº­t JavaScript Ä‘á»ƒ hoáº¡t Ä‘á»™ng.
    </div>
  </noscript>

  <!-- Header -->
  <div class="gradient-bg text-white py-8">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <div class="mb-4">
        <p class="text-sm opacity-80">TÃ¡c giáº£: <strong>Tháº§y VÅ© Tiáº¿n Lá»±c</strong></p>
        <p class="text-sm opacity-75">TrÆ°á»ng THPT Nguyá»…n Há»¯u Cáº£nh</p>
      </div>
      <h1 class="text-4xl font-bold mb-2">ğŸ“ App Sinh Prompt GiÃ¡o Dá»¥c</h1>
      <p class="text-xl opacity-90">Táº¡o prompt tá»± Ä‘á»™ng cho 7 tÃ¬nh huá»‘ng giáº£ng dáº¡y phá»• biáº¿n</p>
    </div>
  </div>

  <div class="max-w-6xl mx-auto px-4 py-8">
    <!-- User Guide -->
    <div class="bg-white rounded-xl card-shadow p-6 mb-8">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-gray-800">ğŸ“– HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng</h2>
        <button type="button" onclick="toggleGuide()" id="guideToggle" class="text-blue-600 hover:text-blue-800 font-medium">
          ğŸ‘ï¸ Xem hÆ°á»›ng dáº«n
        </button>
      </div>

      <div id="guideContent" class="hidden space-y-6">
        <!-- Quick Start -->
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4">
          <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">ğŸš€ Báº¯t Äáº§u Nhanh</h3>
          <ol class="list-decimal list-inside space-y-2 text-gray-700">
            <li><strong>Chá»n máº«u:</strong> Click vÃ o má»™t trong 7 máº«u prompt phÃ­a dÆ°á»›i</li>
            <li><strong>Äiá»n thÃ´ng tin:</strong> Nháº­p Ä‘áº§y Ä‘á»§ cÃ¡c trÆ°á»ng báº¯t buá»™c trong form</li>
            <li><strong>Táº¡o prompt:</strong> Nháº¥n nÃºt "âœ¨ Sinh Prompt" Ä‘á»ƒ táº¡o</li>
            <li><strong>Sá»­ dá»¥ng AI:</strong> Chá»n má»™t trong 5 AI Ä‘á»ƒ sá»­ dá»¥ng prompt ngay</li>
          </ol>
        </div>

        <!-- AI Platforms -->
        <div class="bg-green-50 border-l-4 border-green-400 p-4">
          <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">ğŸ¤– 5 Ná»n Táº£ng AI Há»— Trá»£</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
            <div class="space-y-2">
              <div class="flex items-center gap-2"><span class="text-green-600">ğŸ¤–</span><strong>ChatGPT</strong> - AI máº¡nh</div>
              <div class="flex items-center gap-2"><span class="text-purple-600">âœ¨</span><strong>Gemini</strong> - AI cá»§a Google</div>
              <div class="flex items-center gap-2"><span class="text-blue-600">ğŸ§ </span><strong>Claude</strong> - Anthropic</div>
            </div>
            <div class="space-y-2">
              <div class="flex items-center gap-2"><span class="text-blue-500">ğŸ”·</span><strong>Copilot</strong> - Microsoft</div>
              <div class="flex items-center gap-2"><span class="text-orange-500">ğŸ¦™</span><strong>Perplexity</strong> - TÃ¬m kiáº¿m thÃ´ng minh</div>
            </div>
          </div>
        </div>

        <!-- Template Overview -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-gray-800 flex items-center">ğŸ¯ CÃ¡c Máº«u Prompt</h3>
            <div class="space-y-3 text-sm">
              <div class="flex items-start space-x-3">
                <span class="text-xl">ğŸ“Š</span>
                <div>
                  <div class="font-medium">Báº£ng Ä‘iá»ƒm & nháº­n xÃ©t</div>
                  <div class="text-gray-600">Tá»± Ä‘á»™ng táº¡o báº£ng Ä‘iá»ƒm Excel vá»›i nháº­n xÃ©t cÃ¡ nhÃ¢n</div>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <span class="text-xl">ğŸ“…</span>
                <div>
                  <div class="font-medium">Káº¿ hoáº¡ch quáº£n lÃ½ lá»›p</div>
                  <div class="text-gray-600">Láº­p káº¿ hoáº¡ch tuáº§n</div>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <span class="text-xl">ğŸ“¢</span>
                <div>
                  <div class="font-medium">ThÃ´ng bÃ¡o phá»¥ huynh</div>
                  <div class="text-gray-600">Soáº¡n thÃ´ng bÃ¡o ngáº¯n gá»n</div>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <span class="text-xl">ğŸ¤</span>
                <div>
                  <div class="font-medium">Ká»‹ch báº£n há»p phá»¥ huynh</div>
                  <div class="text-gray-600">15 phÃºt, truyá»n cáº£m há»©ng</div>
                </div>
              </div>
            </div>
          </div>

          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-gray-800 flex items-center">ğŸ’¡ Máº«u Prompt (tiáº¿p)</h3>
            <div class="space-y-3 text-sm">
              <div class="flex items-start space-x-3">
                <span class="text-xl">ğŸ“ˆ</span>
                <div>
                  <div class="font-medium">BÃ¡o cÃ¡o thÃ¡ng</div>
                  <div class="text-gray-600">Tá»•ng káº¿t cho PH</div>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <span class="text-xl">ğŸ’¬</span>
                <div>
                  <div class="font-medium">Lá»i nháº¯n khÃ­ch lá»‡</div>
                  <div class="text-gray-600">CÃ¡ nhÃ¢n hÃ³a Ä‘á»™ng viÃªn</div>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <span class="text-xl">ğŸ§¹</span>
                <div>
                  <div class="font-medium">Lá»‹ch trá»±c nháº­t</div>
                  <div class="text-gray-600">PhÃ¢n cÃ´ng tá»± Ä‘á»™ng</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tips -->
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
          <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">ğŸ’¡ Máº¹o Sá»­ Dá»¥ng Hiá»‡u Quáº£</h3>
          <ul class="list-disc list-inside space-y-2 text-gray-700 text-sm">
            <li><strong>Chuáº©n bá»‹ dá»¯ liá»‡u:</strong> Danh sÃ¡ch HS, Ä‘iá»ƒm sá»‘, lá»‹ch trÃ¬nh...</li>
            <li><strong>TÃ¹y chá»‰nh giá»ng Ä‘iá»‡u:</strong> PhÃ¹ há»£p Ä‘á»‘i tÆ°á»£ng</li>
            <li><strong>Kiá»ƒm tra ká»¹:</strong> Chá»‰nh sá»­a prompt trÆ°á»›c khi dÃ¹ng</li>
            <li><strong>LÆ°u trá»¯:</strong> LÆ°u prompt hay dÃ¹ng Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng</li>
            <li><strong>CÃ¡ nhÃ¢n hÃ³a:</strong> ThÃªm tÃªn trÆ°á»ng, GV, lá»›p</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Template Selection -->
    <div class="bg-white rounded-xl card-shadow p-6 mb-8">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">ğŸ“‹ Chá»n Máº«u Prompt</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <button type="button" onclick="selectTemplate(1, event)" class="template-btn p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
          <div class="text-2xl mb-2">ğŸ“Š</div>
          <div class="font-semibold text-gray-800">Báº£ng Ä‘iá»ƒm & nháº­n xÃ©t</div>
          <div class="text-sm text-gray-600">Táº¡o báº£ng Ä‘iá»ƒm tá»± Ä‘á»™ng</div>
        </button>
        <button type="button" onclick="selectTemplate(2, event)" class="template-btn p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
          <div class="text-2xl mb-2">ğŸ“…</div>
          <div class="font-semibold text-gray-800">Káº¿ hoáº¡ch quáº£n lÃ½ lá»›p</div>
          <div class="text-sm text-gray-600">Láº­p káº¿ hoáº¡ch hÃ ng tuáº§n</div>
        </button>
        <button type="button" onclick="selectTemplate(3, event)" class="template-btn p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
          <div class="text-2xl mb-2">ğŸ“¢</div>
          <div class="font-semibold text-gray-800">ThÃ´ng bÃ¡o phá»¥ huynh</div>
          <div class="text-sm text-gray-600">Soáº¡n thÃ´ng bÃ¡o ngáº¯n gá»n</div>
        </button>
        <button type="button" onclick="selectTemplate(4, event)" class="template-btn p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
          <div class="text-2xl mb-2">ğŸ“ˆ</div>
          <div class="font-semibold text-gray-800">BÃ¡o cÃ¡o thÃ¡ng</div>
          <div class="text-sm text-gray-600">Tá»•ng káº¿t cho phá»¥ huynh</div>
        </button>
        <button type="button" onclick="selectTemplate(5, event)" class="template-btn p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
          <div class="text-2xl mb-2">ğŸ’¬</div>
          <div class="font-semibold text-gray-800">Lá»i nháº¯n khÃ­ch lá»‡</div>
          <div class="text-sm text-gray-600">CÃ¡ nhÃ¢n hÃ³a Ä‘á»™ng viÃªn HS</div>
        </button>
        <button type="button" onclick="selectTemplate(6, event)" class="template-btn p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
          <div class="text-2xl mb-2">ğŸ§¹</div>
          <div class="font-semibold text-gray-800">Lá»‹ch trá»±c nháº­t</div>
          <div class="text-sm text-gray-600">PhÃ¢n cÃ´ng tá»± Ä‘á»™ng</div>
        </button>
        <button type="button" onclick="selectTemplate(7, event)" class="template-btn p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
          <div class="text-2xl mb-2">ğŸ¤</div>
          <div class="font-semibold text-gray-800">Ká»‹ch báº£n há»p phá»¥ huynh</div>
          <div class="text-sm text-gray-600">Ngáº¯n gá»n & truyá»n cáº£m há»©ng</div>
        </button>
      </div>
    </div>

    <!-- Form Container -->
    <div id="formContainer" class="bg-white rounded-xl card-shadow p-6 mb-8 hidden">
      <div class="flex items-center justify-between mb-6">
        <h2 id="formTitle" class="text-2xl font-bold text-gray-800"></h2>
        <button type="button" onclick="clearForm()" class="text-gray-500 hover:text-gray-700 text-sm">ğŸ”„ LÃ m má»›i</button>
      </div>
      <form id="promptForm" class="space-y-6" onsubmit="return false;"></form>
      <div class="mt-8 flex flex-wrap gap-4">
        <button type="button" onclick="generatePrompt()" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all">
          âœ¨ Sinh Prompt
        </button>
        <button type="button" onclick="copyPrompt()" id="copyBtn" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-all hidden">
          ğŸ“‹ Sao chÃ©p
        </button>
      </div>
    </div>

    <!-- Generated Prompt Output -->
    <div id="promptOutput" class="prompt-output rounded-xl p-6 text-white hidden">
      <h3 class="text-xl font-bold mb-4">ğŸ¯ Prompt ÄÃ£ Táº¡o</h3>
      <div id="generatedPrompt" class="bg-white bg-opacity-20 rounded-lg p-4 font-mono text-sm leading-relaxed"></div>

      <!-- AI Platforms -->
      <div class="mt-6 bg-white bg-opacity-10 rounded-lg p-4">
        <h4 class="text-lg font-semibold mb-3">ğŸš€ Chá»n AI Ä‘á»ƒ Sá»­ Dá»¥ng Ngay</h4>
        <p class="text-sm opacity-90 mb-4">Prompt Ä‘Ã£ Ä‘Æ°á»£c sao chÃ©p (náº¿u trÃ¬nh duyá»‡t cho phÃ©p). CÃ³ thá»ƒ báº¥m â€œSao chÃ©pâ€ náº¿u chÆ°a Ä‘Æ°á»£c.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
          <a href="https://chat.openai.com" target="_blank" rel="noopener noreferrer" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-2 justify-center">ğŸ¤– ChatGPT</a>
          <a href="https://gemini.google.com" target="_blank" rel="noopener noreferrer" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-2 justify-center">âœ¨ Gemini</a>
          <a href="https://claude.ai" target="_blank" rel="noopener noreferrer" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-2 justify-center">ğŸ§  Claude</a>
          <a href="https://copilot.microsoft.com" target="_blank" rel="noopener noreferrer" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-2 justify-center">ğŸ”· Copilot</a>
          <a href="https://www.perplexity.ai" target="_blank" rel="noopener noreferrer" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-2 justify-center">ğŸ¦™ Perplexity</a>
        </div>
        <div class="mt-4 bg-white bg-opacity-10 rounded-lg p-3">
          <p class="text-xs opacity-75">ğŸ’¡ <strong>HÆ°á»›ng dáº«n:</strong> Má»Ÿ AI, dÃ¡n prompt vÃ  báº¯t Ä‘áº§u!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- App Script -->
  <script>
    const templates = {
      1: {
        title: "ğŸ“Š Táº¡o báº£ng Ä‘iá»ƒm & nháº­n xÃ©t há»c sinh tá»± Ä‘á»™ng",
        fields: [
          { name: "grade_file_url", label: "ğŸ“‚ File Ä‘iá»ƒm sá»‘", type: "text", placeholder: "Link hoáº·c tÃªn file Excel/CSV" },
          { name: "subjects", label: "ğŸ“š MÃ´n há»c", type: "text", placeholder: "ToÃ¡n, VÄƒn, Anh, LÃ½, HÃ³a..." },
          { name: "grading_scale", label: "ğŸ“ Thang Ä‘iá»ƒm", type: "select", options: ["0-10", "0-100", "A-F"] },
          { name: "classification_rules", label: "ğŸ·ï¸ TiÃªu chÃ­ xáº¿p loáº¡i", type: "text", placeholder: "VD: Giá»i â‰¥ 8.0, KhÃ¡ â‰¥ 6.5..." },
          { name: "tone", label: "ğŸ¤ Giá»ng vÄƒn nháº­n xÃ©t", type: "select", options: ["khÃ­ch lá»‡", "nghiÃªm tÃºc", "thÃ¢n thiá»‡n"] },
          { name: "excel_theme", label: "ğŸ¨ MÃ u báº£ng Ä‘iá»ƒm", type: "select", options: ["xanh dÆ°Æ¡ng", "xanh lÃ¡", "cam"] }
        ],
        template:
          "Báº¡n lÃ  má»™t trá»£ lÃ½ AI chuyÃªn nghiá»‡p, hÃ£y táº¡o báº£ng Ä‘iá»ƒm tá»« {grade_file_url}. Danh sÃ¡ch mÃ´n: {subjects}. Thang Ä‘iá»ƒm: {grading_scale}. Xáº¿p loáº¡i theo quy táº¯c: {classification_rules}. Má»—i há»c sinh gá»“m: tÃªn, Ä‘iá»ƒm trung bÃ¬nh tá»«ng mÃ´n, xáº¿p loáº¡i, nháº­n xÃ©t riÃªng (giá»ng vÄƒn {tone}). Xuáº¥t Excel cÃ³ mÃ u {excel_theme}."
      },
      2: {
        title: "ğŸ“… Láº­p káº¿ hoáº¡ch quáº£n lÃ½ lá»›p há»c hÃ ng tuáº§n",
        fields: [
          { name: "class_name", label: "ğŸ« Lá»›p", type: "text", placeholder: "VD: 10A1" },
          { name: "headcount", label: "ğŸ‘¥ SÄ© sá»‘", type: "number", placeholder: "35" },
          { name: "week_start_date", label: "ğŸ“… Tuáº§n báº¯t Ä‘áº§u", type: "date" },
          { name: "timetable", label: "ğŸ“– Lá»‹ch há»c chi tiáº¿t", type: "textarea", placeholder: "T2: ToÃ¡n, VÄƒn... T3: Anh, LÃ½..." },
          { name: "extracurriculars", label: "ğŸ‰ Hoáº¡t Ä‘á»™ng ngoáº¡i khÃ³a", type: "text", placeholder: "CÃ¢u láº¡c bá»™, thá»ƒ thao..." },
          { name: "focus_goals", label: "ğŸ¯ Má»¥c tiÃªu tuáº§n", type: "select", options: ["há»c táº­p", "ná» náº¿p", "phong trÃ o"] },
          { name: "watchlist_groups", label: "ğŸ‘€ NhÃ³m HS cáº§n lÆ°u Ã½", type: "text", placeholder: "HS yáº¿u, HS nghá»‰ nhiá»u..." }
        ],
        template:
          "Báº¡n lÃ  GVCN dÃ y dáº·n kinh nghiá»‡m. Dá»±a trÃªn thÃ´ng tin lá»›p {class_name} ({headcount} HS), tuáº§n báº¯t Ä‘áº§u {week_start_date}, lá»‹ch há»c: {timetable}, ngoáº¡i khÃ³a: {extracurriculars}, má»¥c tiÃªu tuáº§n: {focus_goals}, nhÃ³m HS cáº§n lÆ°u Ã½: {watchlist_groups}. HÃ£y láº­p káº¿ hoáº¡ch quáº£n lÃ½ lá»›p gá»“m: cÃ´ng viá»‡c, lÆ°u Ã½ theo nhÃ³m, lá»‹ch giao bÃ i, hoáº¡t Ä‘á»™ng gáº¯n káº¿t."
      },
      3: {
        title: "ğŸ“¢ Soáº¡n thÃ´ng bÃ¡o gá»­i phá»¥ huynh ngáº¯n gá»n, chuyÃªn nghiá»‡p",
        fields: [
          { name: "class_name", label: "ğŸ« Lá»›p", type: "text", placeholder: "VD: 10A1" },
          { name: "meeting_datetime", label: "ğŸ“… Thá»i gian há»p", type: "datetime-local" },
          { name: "meeting_location", label: "ğŸ“ Äá»‹a Ä‘iá»ƒm", type: "text", placeholder: "PhÃ²ng há»c, há»™i trÆ°á»ng..." },
          { name: "agenda_points", label: "ğŸ“ Ná»™i dung chÃ­nh", type: "textarea", placeholder: "Há»p phá»¥ huynh, thi há»c ká»³..." },
          { name: "sender_role", label: "ğŸ‘¤ NgÆ°á»i gá»­i", type: "select", options: ["GVCN", "BGH"] },
          { name: "contact_phone", label: "â˜ï¸ LiÃªn há»‡", type: "text", placeholder: "0123456789" }
        ],
        template:
          "HÃ£y viáº¿t má»™t thÃ´ng bÃ¡o ngáº¯n gá»n (â‰¤80 tá»«) gá»­i Zalo nhÃ³m PHHS lá»›p {class_name}. Thá»i gian: {meeting_datetime}, Ä‘á»‹a Ä‘iá»ƒm: {meeting_location}, ná»™i dung: {agenda_points}. NgÆ°á»i gá»­i: {sender_role}. LiÃªn há»‡: {contact_phone}. VÄƒn phong trang trá»ng, rÃµ rÃ ng."
      },
      4: {
        title: "ğŸ“ˆ Táº¡o bÃ¡o cÃ¡o tá»•ng káº¿t thÃ¡ng cho phá»¥ huynh",
        fields: [
          { name: "class_name", label: "ğŸ« Lá»›p", type: "text", placeholder: "VD: 10A1" },
          { name: "month", label: "ğŸ—“ï¸ ThÃ¡ng bÃ¡o cÃ¡o", type: "month" },
          { name: "overall_academic_summary", label: "ğŸ“Š TÃ¬nh hÃ¬nh há»c táº­p chung", type: "textarea", placeholder: "Äiá»ƒm trung bÃ¬nh, tá»· lá»‡ Ä‘áº¡t..." },
          { name: "highlight_activities", label: "ğŸ‰ Hoáº¡t Ä‘á»™ng ná»•i báº­t", type: "textarea", placeholder: "Thi Ä‘ua, cuá»™c thi..." },
          { name: "outstanding_students", label: "ğŸŒŸ HS tiÃªu biá»ƒu", type: "text", placeholder: "TÃªn há»c sinh xuáº¥t sáº¯c" },
          { name: "students_needing_support", label: "ğŸ†˜ HS cáº§n há»— trá»£", type: "text", placeholder: "TÃªn há»c sinh cáº§n quan tÃ¢m" },
          { name: "upcoming_events", label: "ğŸ“Œ Sá»± kiá»‡n sáº¯p tá»›i", type: "textarea", placeholder: "Thi há»c ká»³, hoáº¡t Ä‘á»™ng..." }
        ],
        template:
          "Báº¡n lÃ  trá»£ lÃ½ bÃ¡o cÃ¡o giÃ¡o dá»¥c. HÃ£y viáº¿t bÃ¡o cÃ¡o thÃ¡ng {month} cho phá»¥ huynh lá»›p {class_name}, gá»“m: tÃ¬nh hÃ¬nh há»c táº­p {overall_academic_summary}, hoáº¡t Ä‘á»™ng ná»•i báº­t {highlight_activities}, HS tiÃªu biá»ƒu {outstanding_students}, HS cáº§n há»— trá»£ {students_needing_support}, sá»± kiá»‡n tá»›i {upcoming_events}. NgÃ´n ngá»¯ thÃ¢n thiá»‡n, chuyÃªn nghiá»‡p."
      },
      5: {
        title: "ğŸ’¬ CÃ¡ nhÃ¢n hÃ³a lá»i nháº¯n khÃ­ch lá»‡ há»c sinh",
        fields: [
          { name: "scenarios", label: "ğŸ­ CÃ¡c tÃ¬nh huá»‘ng", type: "select", options: ["Ä‘áº¡t thÃ nh tÃ­ch", "tiáº¿n bá»™", "khÃ³ khÄƒn", "trÆ°á»›c thi"] },
          { name: "max_words_per_message", label: "ğŸ”¢ Giá»›i háº¡n tá»«", type: "number", placeholder: "30", value: "30" },
          { name: "tone", label: "ğŸ¤ Giá»ng Ä‘iá»‡u", type: "select", options: ["truyá»n cáº£m há»©ng", "áº¥m Ã¡p", "vui váº»"] },
          { name: "include_student_name_placeholder", label: "ğŸ§‘â€ğŸ“ ChÃ¨n tÃªn HS", type: "select", options: ["ON", "OFF"] }
        ],
        template:
          "HÃ£y viáº¿t 10 lá»i nháº¯n khÃ­ch lá»‡ há»c sinh theo tÃ¬nh huá»‘ng {scenarios}. Má»—i cÃ¢u â‰¤ {max_words_per_message} tá»«, giá»ng {tone}. CÃ³ thá»ƒ chÃ¨n tÃªn báº±ng {Ten} náº¿u {include_student_name_placeholder} = ON."
      },
      6: {
        title: "ğŸ§¹ Táº¡o lá»‹ch trá»±c nháº­t tá»± Ä‘á»™ng",
        fields: [
          { name: "class_name", label: "ğŸ« Lá»›p", type: "text", placeholder: "VD: 10A1" },
          { name: "student_list", label: "ğŸ‘¥ Danh sÃ¡ch HS", type: "textarea", placeholder: "Nguyá»…n VÄƒn A, Tráº§n Thá»‹ B..." },
          { name: "weeks", label: "ğŸ“… Sá»‘ tuáº§n", type: "number", placeholder: "4", value: "4" },
          { name: "duties", label: "ğŸ§¹ CÃ´ng viá»‡c", type: "text", placeholder: "quÃ©t lá»›p, lau báº£ng, tÆ°á»›i cÃ¢y, xáº¿p bÃ n" },
          { name: "min_turns_per_student", label: "ğŸ“Š Má»—i HS tá»‘i thiá»ƒu", type: "number", placeholder: "2" },
          { name: "pairing_policy", label: "ğŸ‘¯ GhÃ©p nhÃ³m", type: "select", options: ["Ä‘Æ¡n", "cáº·p", "nhÃ³m 4"] }
        ],
        template:
          "HÃ£y táº¡o lá»‹ch trá»±c nháº­t cho lá»›p {class_name}, danh sÃ¡ch: {student_list}, trong {weeks} tuáº§n. CÃ´ng viá»‡c: {duties}. Má»—i HS tá»‘i thiá»ƒu {min_turns_per_student} láº§n, theo quy táº¯c {pairing_policy}. Xuáº¥t báº£ng Excel kÃ¨m hÆ°á»›ng dáº«n in."
      },
      7: {
        title: "ğŸ¤ Soáº¡n ká»‹ch báº£n há»p phá»¥ huynh ngáº¯n gá»n & truyá»n cáº£m há»©ng",
        fields: [
          { name: "theme", label: "ğŸ·ï¸ Chá»§ Ä‘á» há»p", type: "text", placeholder: "VD: Äá»‹nh hÆ°á»›ng há»c táº­p, Káº¿t quáº£ há»c ká»³..." },
          { name: "class_achievements", label: "ğŸ† ThÃ nh tÃ­ch lá»›p", type: "textarea", placeholder: "Giáº£i nháº¥t thi há»c sinh giá»i, 95% HS Ä‘áº¡t Ä‘iá»ƒm khÃ¡ giá»i..." },
          { name: "community_activities", label: "ğŸ¤ Hoáº¡t Ä‘á»™ng gáº¯n káº¿t", type: "textarea", placeholder: "DÃ£ ngoáº¡i, tá»« thiá»‡n, thi tÃ i nÄƒng..." },
          { name: "closing_message", label: "ğŸ“ ThÃ´ng Ä‘iá»‡p káº¿t", type: "textarea", placeholder: "Lá»i cáº£m Æ¡n, kÃªu gá»i há»£p tÃ¡c..." },
          { name: "speaker_style", label: "ğŸ¤ Phong cÃ¡ch nÃ³i", type: "select", options: ["áº¥m Ã¡p", "truyá»n cáº£m há»©ng", "chuyÃªn nghiá»‡p"] }
        ],
        template:
          "HÃ£y viáº¿t ká»‹ch báº£n há»p phá»¥ huynh 15 phÃºt vá»›i chá»§ Ä‘á» {theme}. Ná»™i dung: lá»i chÃ o má»Ÿ Ä‘áº§u, thÃ nh tÃ­ch lá»›p {class_achievements}, hoáº¡t Ä‘á»™ng gáº¯n káº¿t {community_activities}, lá»i káº¿t {closing_message}. Phong cÃ¡ch: {speaker_style}."
      }
    };

    let currentTemplate = null;

    function selectTemplate(templateId, evt) {
      currentTemplate = templates[templateId];
      document.getElementById('formContainer').classList.remove('hidden');
      document.getElementById('formTitle').textContent = currentTemplate.title;

      // Clear previous selection highlight
      document.querySelectorAll('.template-btn').forEach(btn => {
        btn.classList.remove('border-blue-500', 'bg-blue-50');
        btn.classList.add('border-gray-200');
      });

      // Highlight current (robust to clicks on inner elements)
      const btnEl = (evt && (evt.currentTarget || evt.target.closest('.template-btn'))) || null;
      if (btnEl) {
        btnEl.classList.add('border-blue-500', 'bg-blue-50');
        btnEl.classList.remove('border-gray-200');
      }

      generateForm();
      document.getElementById('promptOutput').classList.add('hidden');
      document.getElementById('copyBtn').classList.add('hidden');
    }

    function generateForm() {
      const form = document.getElementById('promptForm');
      form.innerHTML = '';

      currentTemplate.fields.forEach(field => {
        const fieldDiv = document.createElement('div');
        fieldDiv.className = 'space-y-2';

        const label = document.createElement('label');
        label.className = 'block text-sm font-semibold text-gray-700';
        label.textContent = field.label;

        let input;
        if (field.type === 'select') {
          input = document.createElement('select');
          input.className = 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent';
          field.options.forEach(option => {
            const optionEl = document.createElement('option');
            optionEl.value = option;
            optionEl.textContent = option;
            input.appendChild(optionEl);
          });
        } else if (field.type === 'textarea') {
          input = document.createElement('textarea');
          input.className = 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent';
          input.rows = 3;
        } else {
          input = document.createElement('input');
          input.type = field.type;
          input.className = 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent';
        }

        input.name = field.name;
        input.id = field.name;
        if (field.placeholder) input.placeholder = field.placeholder;
        if (field.value) input.value = field.value;

        fieldDiv.appendChild(label);
        fieldDiv.appendChild(input);
        form.appendChild(fieldDiv);
      });
    }

    function formatVietnameseDateTime(dateTimeString) {
      if (!dateTimeString) return dateTimeString;
      const date = new Date(dateTimeString);
      const daysOfWeek = ['Chá»§ nháº­t','Thá»© hai','Thá»© ba','Thá»© tÆ°','Thá»© nÄƒm','Thá»© sÃ¡u','Thá»© báº£y'];
      const dayOfWeek = daysOfWeek[date.getDay()];
      const dd = String(date.getDate()).padStart(2, '0');
      const mm = String(date.getMonth() + 1).padStart(2, '0');
      const yyyy = date.getFullYear();
      const hh = String(date.getHours()).padStart(2, '0');
      const min = String(date.getMinutes()).padStart(2, '0');
      return `${dayOfWeek}, ngÃ y ${dd}/${mm}/${yyyy} lÃºc ${hh}:${min}`;
    }

    function formatVietnameseDate(dateString) {
      if (!dateString) return dateString;
      const date = new Date(dateString);
      const daysOfWeek = ['Chá»§ nháº­t','Thá»© hai','Thá»© ba','Thá»© tÆ°','Thá»© nÄƒm','Thá»© sÃ¡u','Thá»© báº£y'];
      const dayOfWeek = daysOfWeek[date.getDay()];
      const dd = String(date.getDate()).padStart(2, '0');
      const mm = String(date.getMonth() + 1).padStart(2, '0');
      const yyyy = date.getFullYear();
      return `${dayOfWeek}, ngÃ y ${dd}/${mm}/${yyyy}`;
    }

    function formatVietnameseMonth(monthString) {
      if (!monthString) return monthString;
      const [year, month] = monthString.split('-');
      return `thÃ¡ng ${month}/${year}`;
    }

    function generatePrompt() {
      if (!currentTemplate) return;
      let prompt = currentTemplate.template;
      const formData = new FormData(document.getElementById('promptForm'));

      for (let [key, value] of formData.entries()) {
        const placeholder = `{${key}}`;
        let formattedValue = value || `[${key}]`;

        if (key === 'meeting_datetime' && value) {
          formattedValue = formatVietnameseDateTime(value);
        } else if (key === 'week_start_date' && value) {
          formattedValue = formatVietnameseDate(value);
        } else if (key === 'month' && value) {
          formattedValue = formatVietnameseMonth(value);
        }

        prompt = prompt.replace(new RegExp(placeholder, 'g'), formattedValue);
      }

      document.getElementById('generatedPrompt').textContent = prompt;
      document.getElementById('promptOutput').classList.remove('hidden');
      document.getElementById('copyBtn').classList.remove('hidden');

      // Auto-copy náº¿u Ä‘Æ°á»£c phÃ©p
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(prompt).catch(() => {});
      }

      document.getElementById('promptOutput').scrollIntoView({ behavior: 'smooth' });
    }

    function copyPrompt() {
      const promptText = document.getElementById('generatedPrompt').textContent;
      if (!promptText) return;
      const btn = document.getElementById('copyBtn');

      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(promptText)
          .then(() => successFlash(btn))
          .catch(() => fallbackCopy(btn, promptText));
      } else {
        fallbackCopy(btn, promptText);
      }
    }

    function fallbackCopy(btn, text) {
      const ta = document.createElement('textarea');
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      try { document.execCommand('copy'); } catch(e) {}
      document.body.removeChild(ta);
      successFlash(btn);
    }

    function successFlash(btn) {
      const original = btn.textContent;
      btn.textContent = 'âœ… ÄÃ£ sao chÃ©p!';
      btn.classList.add('bg-green-500','text-white');
      btn.classList.remove('bg-gray-200','text-gray-700');
      setTimeout(() => {
        btn.textContent = original;
        btn.classList.remove('bg-green-500','text-white');
        btn.classList.add('bg-gray-200','text-gray-700');
      }, 2000);
    }

    function clearForm() {
      document.getElementById('promptForm').reset();
      document.getElementById('promptOutput').classList.add('hidden');
      document.getElementById('copyBtn').classList.add('hidden');
    }

    function toggleGuide() {
      const guideContent = document.getElementById('guideContent');
      const guideToggle = document.getElementById('guideToggle');
      const hidden = guideContent.classList.toggle('hidden');
      guideToggle.textContent = hidden ? 'ğŸ‘ï¸ Xem hÆ°á»›ng dáº«n' : 'ğŸ™ˆ áº¨n hÆ°á»›ng dáº«n';
    }
  </script>
</body>
</html>
